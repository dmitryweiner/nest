(this.webpackJsonpnest=this.webpackJsonpnest||[]).push([[0],{27:function(e,t,n){},50:function(e,t,n){},51:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n(1),i=n.n(a),r=n(19),s=n.n(r),l=(n(27),n(20)),j=n(2),d=n(4),o=n(12),u=n.n(o),b=n(8),h=n.n(b),O=n(21);function x(e){var t=e.replace(",",".");return Number.parseFloat(t)}function f(e,t){var n=e.split(/\s/),c={id:Object(O.a)(),title:"",x:0,y:0,date:null,distances:[],deltaDistances:[],neighborsCount:0,r:0,isAccepted:!1};switch(t){case 1:c.x=x(n[0]),c.y=x(n[1]);break;case 2:c.title=n[0],c.x=x(n[1]),c.y=x(n[2]);break;case 3:c.title=n[0],c.date=n[1],c.x=x(n[2]),c.y=x(n[3])}return c}function v(e,t){var n,c=[],a=Object(j.a)(t);try{for(a.s();!(n=a.n()).done;){var i=n.value;if(i.id!==e.id){var r=Math.sqrt(Math.pow(i.x-e.x,2)+Math.pow(i.y-e.y,2))/2;c.push(r)}}}catch(s){a.e(s)}finally{a.f()}return c.sort((function(e,t){return e-t})),c}function p(e){for(var t=[],n=0;n<e.length-1;n++)t.push(e[n+1]-e[n]);var c=Math.max.apply(Math,t);return t.map((function(e){return e/c}))}function g(e,t,n){var c,a=0,i=Object(j.a)(t);try{for(i.s();!(c=i.n()).done;){var r=c.value,s=0;if(r.id!==e.id){for(var l=0;l<n;l++)s+=r.distances[l];a+=s/=n}}}catch(d){i.e(d)}finally{i.f()}return(a/=t.length-1)>=e.distances[0]}function m(e){var t,n=0,c=0,a=0;t=e.deltaDistances.length>6?5:e.deltaDistances.length-1;for(var i=1;i<=t;i++)e.deltaDistances[i]>n&&(n=e.deltaDistances[i],c=i);for(var r=0;r<=c;r++)a+=e.distances[r];return{r:a/=c+1,neighborsCount:c+1}}function y(e){var t,n="Number\tR\tNeib\n",c=Object(j.a)(e);try{for(c.s();!(t=c.n()).done;){var a=t.value;n+="".concat(a.title?a.title:a.id,"\t"),a.isAccepted?n+="".concat(a.r.toFixed(3),"\t").concat(a.neighborsCount):n+="NAN\t0",n+="\n"}}catch(i){c.e(i)}finally{c.f()}return n}n(50);var k=function(){var e,t=Object(a.useState)(""),n=Object(d.a)(t,2),i=n[0],r=n[1],s=Object(a.useState)([]),o=Object(d.a)(s,2),b=o[0],O=o[1],x=Object(a.useState)(2),k=Object(d.a)(x,2),N=k[0],C=k[1],w=Object(a.useState)(!0),A=Object(d.a)(w,2),D=A[0],S=A[1],F=Object(a.useState)(3),M=Object(d.a)(F,2),E=M[0],B=M[1],X=Object(a.useState)(0),Y=Object(d.a)(X,2),z=Y[0],I=Y[1],J=h.a.line(),R=h.a.bubble();return R.minBubbleSize("0.5%"),R.maxBubbleSize("5%"),Object(a.useEffect)((function(){var e,t=function(e,t,n){var c,a=[],i=e.split(/[\r\n]+/),r=!0,s=Object(j.a)(i);try{for(s.s();!(c=s.n()).done;){var l=c.value;n&&r?r=!1:""!==l&&a.push(f(l,t))}}catch(d){s.e(d)}finally{s.f()}return a}(i,N,D),n=Object(j.a)(t);try{for(n.s();!(e=n.n()).done;){var c=e.value,a=v(c,t),r=p(a);c.distances=a,c.deltaDistances=r}}catch(s){n.e(s)}finally{n.f()}O(t)}),[i,N,D]),Object(a.useEffect)((function(){!function(e){if(console.log("setDistancesGraphData",J),!b[e])return;for(var t=[],n=0;n<b[e].distances.length;n++)t.push([n,b[e].distances[n],b[e].deltaDistances[n]]);var c=h.a.data.set(t),a=c.mapAs({x:0,value:1}),i=c.mapAs({x:0,value:2});J.line(a),J.line(i)}(z)}),[b,z]),Object(a.useEffect)((function(){!function(e){if(!e||!e.length)return;var t,n=[],c=[],a=Object(j.a)(e);try{for(a.s();!(t=a.n()).done;){var i=t.value;i.isAccepted?n.push([i.x,i.y,i.r]):c.push([i.x,i.y,0])}}catch(r){a.e(r)}finally{a.f()}R.bubble(n),R.bubble(c)}(b)}),[b]),Object(c.jsx)("div",{className:"App",children:Object(c.jsxs)("div",{className:"wrapper",children:[Object(c.jsx)("h1",{children:"Nest"}),Object(c.jsx)("h4",{children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0444\u043e\u0440\u043c\u0430\u0442 \u0432\u0445\u043e\u0434\u043d\u044b\u0445 \u0434\u0430\u043d\u043d\u044b\u0445:"}),Object(c.jsx)("div",{children:Object(c.jsxs)("label",{children:[Object(c.jsx)("input",{type:"radio",name:"inputFormat",checked:1===N,onChange:function(e){return e.target.checked&&C(1)}}),"X Y"]})}),Object(c.jsx)("div",{children:Object(c.jsxs)("label",{children:[Object(c.jsx)("input",{type:"radio",name:"inputFormat",checked:2===N,onChange:function(e){return e.target.checked&&C(2)}}),"<\u041c\u0435\u0442\u043a\u0430 \u0433\u043d\u0435\u0437\u0434\u0430> X Y"]})}),Object(c.jsx)("div",{children:Object(c.jsxs)("label",{children:[Object(c.jsx)("input",{type:"radio",name:"inputFormat",checked:3===N,onChange:function(e){return e.target.checked&&C(3)}}),"<\u041c\u0435\u0442\u043a\u0430 \u0433\u043d\u0435\u0437\u0434\u0430> <\u0414\u0430\u0442\u0430 \u043e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u044f> X Y"]})}),Object(c.jsx)("div",{children:Object(c.jsxs)("label",{children:[Object(c.jsx)("input",{type:"checkbox",checked:D,onChange:function(e){return S(e.target.checked)}}),"\u0421 \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u043e\u043c"]})}),Object(c.jsxs)("div",{children:[Object(c.jsx)("h4",{children:"\u0421\u043a\u043e\u043f\u0438\u0440\u0443\u0439\u0442\u0435 \u0441\u044e\u0434\u0430 \u043a\u043e\u043e\u0440\u0434\u0438\u043d\u0430\u0442\u044b \u0433\u043d\u0451\u0437\u0434:"}),Object(c.jsxs)("div",{className:"input-coordinates-block",children:[Object(c.jsx)("div",{className:"input-textarea",children:Object(c.jsx)("textarea",{rows:10,className:"textarea-with-data",value:i,onChange:function(e){return r(e.target.value)}})}),Object(c.jsx)("div",{className:"nest-list",children:Object(c.jsx)("ul",{children:b.map((function(e){return Object(c.jsxs)("li",{children:[Object(c.jsx)("b",{children:e.title?e.title:e.id}),"\xa0",e.date&&e.date,"\xa0",e.x," ",e.y]},e.id)}))})})]})]}),Object(c.jsx)("div",{children:Object(c.jsxs)("label",{children:["\u0411\u0440\u0430\u0442\u044c \u043f\u0435\u0440\u0432\u044b\u0445",Object(c.jsxs)("select",{value:E,onChange:function(e){return B(e.target.value)},children:[Object(c.jsx)("option",{children:"1"}),Object(c.jsx)("option",{children:"2"}),Object(c.jsx)("option",{children:"3"}),Object(c.jsx)("option",{children:"4"}),Object(c.jsx)("option",{children:"5"}),Object(c.jsx)("option",{children:"6"}),Object(c.jsx)("option",{children:"7"})]})]})}),Object(c.jsxs)("div",{className:"distances",children:[Object(c.jsx)("h4",{children:"\u0420\u0430\u0441\u0441\u0442\u043e\u044f\u043d\u0438\u044f \u0434\u043e \u0441\u043e\u0441\u0435\u0434\u0435\u0439:"}),Object(c.jsx)("input",{type:"range",min:"0",max:b.length-1,value:z,onChange:function(e){return I(e.target.value)}}),Object(c.jsx)("button",{onClick:function(){return z>0&&I(z-1)},children:"<"}),Object(c.jsx)("button",{onClick:function(){return z<b.length-1&&I(z+1)},children:">"}),Object(c.jsx)(u.a,{id:"distances",title:"\u0420\u0430\u0441\u0441\u0442\u043e\u044f\u043d\u0438\u044f \u0434\u043e \u0441\u043e\u0441\u0435\u0434\u0435\u0439 \u0433\u043d\u0435\u0437\u0434\u0430 ".concat(null===(e=b[z])||void 0===e?void 0:e.title),instance:J,height:600})]}),Object(c.jsx)("div",{children:Object(c.jsx)("button",{onClick:function(){return function(){var e,t=Object(j.a)(b);try{for(t.s();!(e=t.n()).done;){var n=e.value;if(n.isAccepted=g(n,b,E),n.isAccepted){var c=m(n),a=c.r,i=c.neighborsCount;n.r=a,n.neighborsCount=i}}}catch(r){t.e(r)}finally{t.f()}O(Object(l.a)(b))}()},children:"\u0420\u0430\u0441\u0447\u0438\u0442\u0430\u0442\u044c!"})}),Object(c.jsxs)("div",{children:[Object(c.jsx)("h4",{children:"\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442"}),Object(c.jsxs)("p",{children:["\u041c\u043e\u0436\u043d\u043e \u0441\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0438\u043b\u0438"," ",Object(c.jsx)("a",{href:"data:text/plain;charset=UTF-8,".concat(encodeURIComponent(y(b).replace("\n","\r\n"))),download:"nest_results.txt",children:"\u0441\u043a\u0430\u0447\u0430\u0442\u044c \u0432 \u0432\u0438\u0434\u0435 \u0444\u0430\u0439\u043b\u0430"})]}),Object(c.jsxs)("div",{className:"results-block",children:[Object(c.jsx)("div",{className:"results-textarea",children:Object(c.jsx)("textarea",{className:"textarea-with-data",rows:5,value:y(b),readOnly:!0})}),Object(c.jsx)("div",{className:"results-graph",children:Object(c.jsx)(u.a,{id:"nest-map",instance:R,title:"\u041a\u0430\u0440\u0442\u0430 \u0433\u043d\u0451\u0437\u0434",height:600})})]})]})]})})};s.a.render(Object(c.jsx)(i.a.StrictMode,{children:Object(c.jsx)(k,{})}),document.getElementById("root"))}},[[51,1,2]]]);
//# sourceMappingURL=main.04d8003a.chunk.js.map